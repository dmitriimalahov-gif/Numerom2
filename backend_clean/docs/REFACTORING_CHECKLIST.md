# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

**–î–∞—Ç–∞:** 2025-10-09
**–ü—Ä–æ–µ–∫—Ç:** Numerom Backend Refactoring
**–¶–µ–ª—å:** –†–∞–∑–±–∏—Ç—å monolith (4806 —Å—Ç—Ä–æ–∫) –Ω–∞ Clean Architecture

---

## üéØ –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 0/122 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (0%)

---

## –§–∞–∑–∞ 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚è≥

### ‚úÖ –®–∞–≥ 1.1: –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
- [x] –°–æ–∑–¥–∞—Ç—å `backend_clean/`
- [x] –°–æ–∑–¥–∞—Ç—å `core/`
- [x] –°–æ–∑–¥–∞—Ç—å `database/repositories/`
- [x] –°–æ–∑–¥–∞—Ç—å `models/`
- [x] –°–æ–∑–¥–∞—Ç—å `services/`
- [x] –°–æ–∑–¥–∞—Ç—å `api/v1/`
- [x] –°–æ–∑–¥–∞—Ç—å `utils/`
- [x] –°–æ–∑–¥–∞—Ç—å `tests/{unit,integration,e2e}/`
- [x] –°–æ–∑–¥–∞—Ç—å `docs/`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–î–∞—Ç–∞:** 2025-10-09

---

### ‚è≥ –®–∞–≥ 1.2: –°–æ–∑–¥–∞—Ç—å core/config.py

**–ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/server.py` (—Å—Ç—Ä–æ–∫–∏ 50-95)
- `backend/.env`

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `core/config.py`
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å Settings —Å Pydantic
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ MONGO_URL, JWT –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ Stripe –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ PAYMENT_PACKAGES
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ SUBSCRIPTION_CREDITS
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ UPLOAD_ROOT –∏ –ø—É—Ç–∏
- [ ] –°–æ–∑–¥–∞—Ç—å singleton `settings`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É .env

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
```
core/
‚îú‚îÄ‚îÄ __init__.py
‚îî‚îÄ‚îÄ config.py
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ server.py:** 50-95

---

### ‚è≥ –®–∞–≥ 1.3: –°–æ–∑–¥–∞—Ç—å core/security.py

**–ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/auth.py` (–≤–µ—Å—å —Ñ–∞–π–ª)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `core/security.py`
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç—ã (passlib, jose, datetime)
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ `verify_password()`
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ `get_password_hash()`
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ `create_access_token()`
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ `get_current_user()`
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ `get_current_user_full()`
- [ ] –°–æ–∑–¥–∞—Ç—å `require_super_admin()` decorator
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã —Å config

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
```
core/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ config.py
‚îî‚îÄ‚îÄ security.py
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã:** `auth.py` (—Ü–µ–ª–∏–∫–æ–º, –Ω–æ –Ω–µ —É–¥–∞–ª—è–µ–º)

---

### ‚è≥ –®–∞–≥ 1.4: –°–æ–∑–¥–∞—Ç—å database/connection.py

**–ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/server.py` (—Å—Ç—Ä–æ–∫–∏ 54-56, 114-116)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/connection.py`
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å Database
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `async connect()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `async disconnect()`
- [ ] –°–æ–∑–¥–∞—Ç—å singleton `db_instance`
- [ ] –°–æ–∑–¥–∞—Ç—å `get_db()` dependency
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã —Å config

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
```
database/
‚îú‚îÄ‚îÄ __init__.py
‚îî‚îÄ‚îÄ connection.py
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ server.py:** 54-56, 114-116

---

### ‚è≥ –®–∞–≥ 1.5: –°–æ–∑–¥–∞—Ç—å database/repositories/base.py

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/repositories/base.py`
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å BaseRepository
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `find_one(query)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `find_many(query, limit)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `create(data)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `update(query, data)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `delete(query)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `count(query)`
- [ ] –î–æ–±–∞–≤–∏—Ç—å type hints

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
```
database/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ connection.py
‚îî‚îÄ‚îÄ repositories/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îî‚îÄ‚îÄ base.py
```

---

## –§–∞–∑–∞ 2: –ú–æ–¥–µ–ª–∏ ‚è≥

### ‚è≥ –®–∞–≥ 2.1: –†–∞–∑–±–∏—Ç—å models.py –Ω–∞ –¥–æ–º–µ–Ω—ã

**–ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/models.py` (512 —Å—Ç—Ä–æ–∫)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `models/user.py` (—Å—Ç—Ä–æ–∫–∏ 7-73)
  - [ ] UserCreate
  - [ ] UserProfileUpdate
  - [ ] UserResponse
  - [ ] User
  - [ ] LoginRequest
  - [ ] TokenResponse
- [ ] –°–æ–∑–¥–∞—Ç—å `models/payment.py` (—Å—Ç—Ä–æ–∫–∏ 76-92)
  - [ ] PaymentTransaction
  - [ ] PaymentRequest
- [ ] –°–æ–∑–¥–∞—Ç—å `models/numerology.py` (—Å—Ç—Ä–æ–∫–∏ 94-383)
  - [ ] NumerologyCalculation
  - [ ] CompatibilityRequest
  - [ ] GroupCompatibilityRequest
  - [ ] PersonalNumbersResponse
  - [ ] VedicTimeRequest
  - [ ] PDFReportRequest
  - [ ] HTMLReportRequest
- [ ] –°–æ–∑–¥–∞—Ç—å `models/lesson.py` (—Å—Ç—Ä–æ–∫–∏ 160-195, 406-434)
  - [ ] VideoLesson
  - [ ] UserProgress
  - [ ] UserLevel
  - [ ] LessonContent
  - [ ] LessonQuiz
- [ ] –°–æ–∑–¥–∞—Ç—å `models/consultation.py` (—Å—Ç—Ä–æ–∫–∏ 197-227)
  - [ ] PersonalConsultation
  - [ ] ConsultationPurchase
  - [ ] SubtitleFile
- [ ] –°–æ–∑–¥–∞—Ç—å `models/credit.py` (—Å—Ç—Ä–æ–∫–∏ 229-254)
  - [ ] CreditTransaction
  - [ ] CREDIT_COSTS
- [ ] –°–æ–∑–¥–∞—Ç—å `models/quiz.py` (—Å—Ç—Ä–æ–∫–∏ 150-158, 256-270)
  - [ ] QuizResult
  - [ ] QuizQuestion
  - [ ] RandomizedQuiz
- [ ] –°–æ–∑–¥–∞—Ç—å `models/admin.py` (—Å—Ç—Ä–æ–∫–∏ 297-302)
  - [ ] AdminUser
  - [ ] SuperAdminAction
- [ ] –°–æ–∑–¥–∞—Ç—å `models/__init__.py` —Å —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–æ–º
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤ –∫–æ–¥–µ

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
```
models/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ user.py
‚îú‚îÄ‚îÄ payment.py
‚îú‚îÄ‚îÄ numerology.py
‚îú‚îÄ‚îÄ lesson.py
‚îú‚îÄ‚îÄ consultation.py
‚îú‚îÄ‚îÄ credit.py
‚îú‚îÄ‚îÄ quiz.py
‚îî‚îÄ‚îÄ admin.py
```

---

## –§–∞–∑–∞ 3: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ‚è≥

### ‚è≥ –®–∞–≥ 3.1: UserRepository

**–ê–Ω–∞–ª–∏–∑ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ server.py:**

| –ú–µ—Ç–æ–¥ | –°—Ç—Ä–æ–∫–∏ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π |
|-------|--------|--------------------------|
| find_by_id | 138, 402, 429, 567, 606, 665, 706, 767, 1631, 2107, 2683, 2778, 2897, 2942, 2949 | 15 |
| find_by_email | 177, 209 | 2 |
| create | 203 | 1 |
| update | 217, 1686, 2961, 2975 | 4 |
| increment_credits | 146, 299, 308, 343, 348, 742, 761, 2887, 2934 | 9 |
| find_all | 1650 | 1 |
| delete | 1725 | 1 |

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/repositories/user_repository.py`
- [ ] –ù–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç BaseRepository
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `find_by_id(user_id)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `find_by_email(email)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `exists_by_email(email)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `create(user_data)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `update(user_id, data)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `delete(user_id)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `increment_credits(user_id, amount)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `update_subscription(user_id, sub_data)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `find_all()`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 138, 146, 177, 203, 209, 217, 299, 308, 343, 348, 402, 429, 567, 606, 665, 706, 742, 761, 767, 1631, 1650, 1686, 1725, 2107, 2683, 2778, 2783, 2887, 2897, 2902, 2934, 2942, 2949, 2961, 2975

**–í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** ~35

---

### ‚è≥ –®–∞–≥ 3.2: CreditRepository

**–ê–Ω–∞–ª–∏–∑ –æ–ø–µ—Ä–∞—Ü–∏–π:**

| –ú–µ—Ç–æ–¥ | –°—Ç—Ä–æ–∫–∏ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π |
|-------|--------|---------------|
| create_transaction | 134 | 1 |
| find_by_user | 158-160 | 1 |
| count_by_user | 171 | 1 |

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/repositories/credit_repository.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `create_transaction(data)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `find_by_user(user_id, limit, offset)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `count_by_user(user_id)`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 134, 158-171

---

### ‚è≥ –®–∞–≥ 3.3: PaymentRepository

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/repositories/payment_repository.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `create_transaction(data)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `find_by_session_id(session_id)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `update_status(session_id, status)`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 244, 279, 287, 327, 366

---

### ‚è≥ –®–∞–≥ 3.4: NumerologyRepository

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/repositories/numerology_repository.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `create_calculation(data)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `find_by_user(user_id)`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 419, 447, 470, 2690

---

### ‚è≥ –®–∞–≥ 3.5: LessonRepository

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/repositories/lesson_repository.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è video_lessons
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è custom_lessons
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è user_progress
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è user_levels
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 822-1015, 1034-1394

---

### ‚è≥ –®–∞–≥ 3.6: ConsultationRepository

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/repositories/consultation_repository.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è personal_consultations
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è consultation_purchases
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 325, 365, 2070-2680

---

### ‚è≥ –®–∞–≥ 3.7: MaterialRepository

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/repositories/material_repository.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è materials
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è material_views
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 1440-1850

---

### ‚è≥ –®–∞–≥ 3.8: FileRepository

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `database/repositories/file_repository.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è uploaded_files
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è lesson_videos/pdfs
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 1876-4250

---

## –§–∞–∑–∞ 4: –°–µ—Ä–≤–∏—Å—ã ‚è≥

### ‚è≥ –®–∞–≥ 4.1: AuthService

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- POST `/api/auth/register` (—Å—Ç—Ä–æ–∫–∏ 175-206)
- POST `/api/auth/login` (—Å—Ç—Ä–æ–∫–∏ 208-233)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `services/auth_service.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `register_user(user_data)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `login(credentials)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `get_current_user_info(user_id)`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 175-233

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0/3 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

---

### ‚è≥ –®–∞–≥ 4.2: CreditService

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- GET `/api/user/credit-history` (—Å—Ç—Ä–æ–∫–∏ 152-172)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `services/credit_service.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `record_transaction(...)` (—Å—Ç—Ä–æ–∫–∞ 119-134)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `deduct_credits(...)` (—Å—Ç—Ä–æ–∫–∞ 136-149)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `get_history(user_id, limit, offset)`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 119-172

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0/1 —ç–Ω–¥–ø–æ–∏–Ω—Ç

---

### ‚è≥ –®–∞–≥ 4.3: PaymentService

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- POST `/api/payments/create-session` (—Å—Ç—Ä–æ–∫–∏ 235-284)
- GET `/api/payments/success` (—Å—Ç—Ä–æ–∫–∏ 286-333)
- POST `/api/payments/stripe-webhook` (—Å—Ç—Ä–æ–∫–∏ 335-370)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `services/payment_service.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `create_payment_session(...)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `handle_success(...)`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `handle_webhook(...)`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 235-370

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0/3 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞

---

### ‚è≥ –®–∞–≥ 4.4: NumerologyService

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (15):**
- POST `/api/numerology/personal-numbers` (390-420)
- POST `/api/numerology/pythagorean-square` (422-448)
- POST `/api/numerology/compatibility` (450-471)
- POST `/api/numerology/group-compatibility` (473-568)
- POST `/api/numerology/vedic-daily` (570-597)
- POST `/api/numerology/planetary-daily` (599-638)
- POST `/api/numerology/planetary-monthly` (640-698)
- POST `/api/numerology/planetary-quarterly` (700-739)
- POST `/api/numerology/free-calculation` (741-762)
- GET `/api/numerology/calculations` (2682-2691)
- POST `/api/numerology/pdf` (2778-2895)
- POST `/api/numerology/html` (2897-2940)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `services/numerology_service.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö —Ä–∞—Å—á—ë—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é PDF/HTML
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 390-762, 2682-2940

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0/15 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

---

### ‚è≥ –®–∞–≥ 4.5: LessonService

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (~25):**
- GET `/api/lessons/my-progress` (820-878)
- GET `/api/lessons` (880-903)
- POST `/api/lessons/{id}/complete` (904-916)
- GET `/api/lessons/{id}` (921-995)
- –ò –µ—â—ë ~21 —ç–Ω–¥–ø–æ–∏–Ω—Ç

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `services/lesson_service.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è —É—Ä–æ–∫–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∫–≤–∏–∑–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 820-2050

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0/25 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

---

### ‚è≥ –®–∞–≥ 4.6: ConsultationService

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (~15):**
- GET `/api/consultations` (2070-2145)
- POST `/api/consultations` (2147-2160)
- –ò –µ—â—ë ~13 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `services/consultation_service.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–∫—É–ø–∫–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ñ–∞–π–ª–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 2070-2680

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0/15 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

---

### ‚è≥ –®–∞–≥ 4.7: AdminService

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (~14):**
- GET `/api/admin/users` (1650-1674)
- PUT `/api/admin/users/{id}/credits` (1676-1704)
- DELETE `/api/admin/users/{id}` (1712-1741)
- –ò –µ—â—ë ~11 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `services/admin_service.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 1390-1850

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0/14 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

---

## –§–∞–∑–∞ 5: API –†–æ—É—Ç–µ—Ä—ã ‚è≥

### ‚è≥ –®–∞–≥ 5.1: –°–æ–∑–¥–∞—Ç—å –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/auth.py` (3 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/credits.py` (2 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/payments.py` (5 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/users.py` (8 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/numerology.py` (15 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/lessons.py` (25 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/consultations.py` (15 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/materials.py` (12 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/files.py` (20 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/admin.py` (14 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å `api/v1/__init__.py` —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –≤—Å–µ—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 0/122 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞

---

### ‚è≥ –®–∞–≥ 5.2: –°–æ–∑–¥–∞—Ç—å main.py

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `main.py`
- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å FastAPI
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã –∏–∑ api/v1
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å startup/shutdown events
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å middleware
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `main.py` (~100 —Å—Ç—Ä–æ–∫)

---

### ‚è≥ –®–∞–≥ 5.3: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `numerology.py` ‚Üí `utils/numerology.py`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `vedic_numerology.py` ‚Üí `utils/vedic_numerology.py`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `vedic_time_calculations.py` ‚Üí `utils/vedic_time_calculations.py`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `html_generator.py` ‚Üí `utils/html_generator.py`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `pdf_generator.py` ‚Üí `utils/pdf_generator.py`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `lesson_system.py` ‚Üí `utils/lesson_system.py`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ —ç—Ç–∏—Ö —Ñ–∞–π–ª–∞—Ö

---

## –§–∞–∑–∞ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚è≥

### ‚è≥ –®–∞–≥ 6.1: –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (8 —Ñ–∞–π–ª–æ–≤)
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (7 —Ñ–∞–π–ª–æ–≤)
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç (6 —Ñ–∞–π–ª–æ–≤)

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** –¶–µ–ª—å > 80%

---

### ‚è≥ –®–∞–≥ 6.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤ (10 —Ñ–∞–π–ª–æ–≤)
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è payments flow
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è file uploads

---

### ‚è≥ –®–∞–≥ 6.3: E2E —Ç–µ—Å—Ç—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –õ–æ–≥–∏–Ω ‚Üí –†–∞—Å—á—ë—Ç
- [ ] –ü–æ–∫—É–ø–∫–∞ ‚Üí –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤
- [ ] –£—Ä–æ–∫ ‚Üí –ü—Ä–æ–≥—Ä–µ—Å—Å ‚Üí –ö–≤–∏–∑

---

## –§–∞–∑–∞ 7: –î–µ–ø–ª–æ–π ‚è≥

### ‚è≥ –®–∞–≥ 7.1: –û–±–Ω–æ–≤–∏—Ç—å Docker

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `backend_clean/Dockerfile`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `docker-compose.yml`
- [ ] –°–æ–∑–¥–∞—Ç—å `.dockerignore`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å requirements.txt

---

### ‚è≥ –®–∞–≥ 7.2: –û–±–Ω–æ–≤–∏—Ç—å .env

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `.env.example`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

---

### ‚è≥ –®–∞–≥ 7.3: –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞–¥–∞—á–∏:**
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤—Ä—É—á–Ω—É—é
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å —Å —Å—Ç–∞—Ä—ã–º backend
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
–§–∞–∑–∞ 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞          1/5   –∑–∞–¥–∞—á (20%)
–§–∞–∑–∞ 2: –ú–æ–¥–µ–ª–∏                  0/2   –∑–∞–¥–∞—á (0%)
–§–∞–∑–∞ 3: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏             0/8   –∑–∞–¥–∞—á (0%)
–§–∞–∑–∞ 4: –°–µ—Ä–≤–∏—Å—ã                 0/7   –∑–∞–¥–∞—á (0%)
–§–∞–∑–∞ 5: –†–æ—É—Ç–µ—Ä—ã                 0/3   –∑–∞–¥–∞—á (0%)
–§–∞–∑–∞ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ            0/3   –∑–∞–¥–∞—á (0%)
–§–∞–∑–∞ 7: –î–µ–ø–ª–æ–π                  0/3   –∑–∞–¥–∞—á (0%)

–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:                 1/31  –∑–∞–¥–∞—á (3.2%)
–≠–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ:          0/122 (0%)
–°—Ç—Ä–æ–∫ –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ:            0/4806 (0%)
```

---

## üéØ –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –®–∞–≥ 1.2 - –°–æ–∑–¥–∞—Ç—å `core/config.py`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í—Ä–µ–º—è:** ~30 –º–∏–Ω—É—Ç
