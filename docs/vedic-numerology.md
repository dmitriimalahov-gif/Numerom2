# Ведическая нумерология

## Обзор

Модуль ведической нумерологии (`vedic_numerology.py`) реализует традиционную систему расчетов на основе древних ведических принципов с использованием санскритских терминов и планетарных соответствий.

## Основные концепции

### Планетарные соответствия (Граха)
В ведической системе каждое число связано с определенной планетой:

```python
graha_names = {
    1: "सूर्य (Surya)",      # Солнце
    2: "चन्द्र (Chandra)",    # Луна  
    3: "गुरु (Guru)",         # Юпитер
    4: "राहु (Rahu)",         # Северный узел
    5: "बुध (Budha)",         # Меркурий
    6: "शुक्र (Shukra)",      # Венера
    7: "केतु (Ketu)",         # Южный узел
    8: "शनि (Shani)",        # Сатурн
    9: "मंगल (Mangal)"       # Марс
}
```

### Цветовая система
Каждая планета имеет традиционный ведический цвет:

```python
vedic_colors = {
    1: "#FF6B35",  # Сурья - Оранжево-красный
    2: "#E8F4FD",  # Чандра - Серебристо-белый
    3: "#FFD700",  # Гуру - Золотисто-желтый
    4: "#8B4513",  # Раху - Коричневый/Темный
    5: "#90EE90",  # Будха - Зеленый
    6: "#FFB6C1",  # Шукра - Розовый
    7: "#9932CC",  # Кету - Фиолетовый
    8: "#2F4F4F",  # Шани - Темно-серый
    9: "#DC143C"   # Мангал - Красный/Алый
}
```

## Основные числа

### 1. Джанма анк (जन्म अंक) - Число рождения
```python
def calculate_janma_ank(day: int, month: int, year: int) -> int:
    """
    Рассчитывает Джанма анк (число жизненного пути)
    Формула: сумма дня + месяца + года, приведенная к однозначному числу
    
    Пример: 15.08.1985 → 15+8+1985 = 2008 → 2+0+0+8 = 10 → 1+0 = 1
    """
    total = day + month + year
    return reduce_to_single_digit(total)
```

### 2. Багья анк (भाग्य अंक) - Число судьбы  
```python
def calculate_bhagya_ank(day: int, month: int, year: int) -> int:
    """
    Рассчитывает Багья анк (число судьбы)
    Формула: сумма всех цифр даты рождения
    
    Пример: 15.08.1985 → 1+5+0+8+1+9+8+5 = 37 → 3+7 = 10 → 1+0 = 1
    """
    all_digits = [int(d) for d in str(day) + str(month) + str(year)]
    total = sum(all_digits)
    return reduce_to_single_digit(total)
```

### 3. Атма анк (आत्मा अंक) - Число души
```python
def calculate_atma_ank(day: int) -> int:
    """
    Рассчитывает Атма анк (число души)
    Формула: день рождения, приведенный к однозначному числу
    
    Пример: родился 15 числа → 1+5 = 6
    """
    return reduce_to_single_digit(day)
```

### 4. Нама анк (नाम अंक) - Число имени
```python
def calculate_nama_ank(name: str) -> int:
    """
    Упрощенный расчет числа имени
    В полной версии используются санскритские соответствия букв
    """
    values = {
        'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5, 'f': 6, 'g': 7, 'h': 8, 'i': 9,
        'j': 1, 'k': 2, 'l': 3, 'm': 4, 'n': 5, 'o': 6, 'p': 7, 'q': 8, 'r': 9,
        's': 1, 't': 2, 'u': 3, 'v': 4, 'w': 5, 'x': 6, 'y': 7, 'z': 8
    }
    total = sum(values.get(char.lower(), 0) for char in name if char.isalpha())
    return reduce_to_single_digit(total)
```

### 5. Шакти анк (शक्ति अंक) - Число силы
```python
def calculate_shakti_ank(janma_ank: int, nama_ank: int) -> int:
    """
    Рассчитывает Шакти анк (число силы)
    Формула: Джанма анк + Нама анк
    """
    return reduce_to_single_digit(janma_ank + nama_ank)
```

## Граха шакти (ग्रह शक्ति) - Планетарная сила

### calculate_graha_shakti(day: int, month: int, year: int)
Анализирует силу планет на основе количества соответствующих цифр в дате рождения.

**Алгоритм:**
1. Извлекает все цифры из даты рождения
2. Подсчитывает количество каждой цифры (1-9)
3. Сопоставляет с планетарными энергиями

**Пример для 15.08.1985:**
```python
# Цифры: 1,5,0,8,1,9,8,5
graha_shakti = {
    "1 (Сурья)": 2,    # Две единицы - умеренная солнечная энергия
    "5 (Будха)": 2,    # Два пятерки - хорошая энергия Меркурия  
    "8 (Шани)": 2,     # Две восьмерки - влияние Сатурна
    "9 (Мангал)": 1,   # Одна девятка - слабая энергия Марса
    # Остальные планеты отсутствуют
}
```

## Ведическая янтра (यन्त्र)

### create_vedic_yantra(day: int, month: int, year: int)
Создает ведическую янтру - усовершенствованную версию квадрата Пифагора с планетарными позициями.

**Расположение планет в янтре:**
```
┌─────────┬─────────┬─────────┐
│ Сурья   │ Чандра  │ Гуру    │
│ (1)     │ (2)     │ (3)     │
├─────────┼─────────┼─────────┤
│ Раху    │ Будха   │ Шукра   │ 
│ (4)     │ (5)     │ (6)     │
├─────────┼─────────┼─────────┤
│ Кету    │ Шани    │ Мангал  │
│ (7)     │ (8)     │ (9)     │
└─────────┴─────────┴─────────┘
```

**Возвращает:**
```python
{
    "yantra_matrix": [              # 3x3 матрица с числами
        ["11", "2", ""],           # Строка 1: Сурья, Чандра, Гуру
        ["", "55", ""],            # Строка 2: Раху, Будха, Шукра  
        ["", "88", "9"]            # Строка 3: Кету, Шани, Мангал
    ],
    "yantra_sums": {
        "horizontal": [4, 2, 3],   # Горизонтальные суммы
        "vertical": [2, 6, 1],     # Вертикальные суммы
        "diagonal": [7, 6]         # Диагональные суммы
    },
    "graha_positions": {           # Позиции планет
        "1": [0, 0], "2": [1, 0], "3": [2, 0],
        "4": [0, 1], "5": [1, 1], "6": [2, 1],
        "7": [0, 2], "8": [1, 2], "9": [2, 2]
    },
    "graha_names": {               # Названия планет
        "1": "सूर्य (Surya)", "2": "चन्द्र (Chandra)", ...
    }
}
```

## Планетарные периоды

### Махадаша (महादशा) - Главный период
```python
def calculate_mahadasha(birth_date: str) -> str:
    """
    Упрощенный расчет текущей Махадаши
    В полной системе учитывается точное время рождения и накшатра
    """
    day, month, year = parse_birth_date(birth_date)
    birth_year_digit = reduce_to_single_digit(year)
    graha_names = get_graha_names()
    return graha_names.get(birth_year_digit, "Surya")
```

### Антардаша (अन्तर्दशा) - Подпериод
```python
def calculate_antardasha(birth_date: str) -> str:
    """
    Упрощенный расчет текущей Антардаши
    Основан на месяце рождения и текущем месяце
    """
    day, month, year = parse_birth_date(birth_date)
    current_month = datetime.now().month
    antardasha_number = reduce_to_single_digit(month + current_month)
    graha_names = get_graha_names()
    return graha_names.get(antardasha_number, "Chandra")
```

## Упаи (उपाय) - Средства гармонизации

### get_vedic_upayas(janma_ank: int)
Предоставляет традиционные ведические средства для усиления или гармонизации планетарных энергий.

**Примеры упаи:**

#### Для Сурьи (1) - Солнце:
```python
upayas = [
    "सूर्य नमस्कार का अभ्यास करें (Practice Surya Namaskara)",
    "रविवार को लाल वस्त्र धारण करें (Wear red clothes on Sunday)", 
    "गुड़ और गेहूं का दान करें (Donate jaggery and wheat)"
]
```

#### Для Чандры (2) - Луна:
```python
upayas = [
    "सोमवार को श्वेत वस्त्र धारण करें (Wear white clothes on Monday)",
    "चांदी की अंगूठी पहनें (Wear silver ring)",
    "चावल और दूध का दान करें (Donate rice and milk)"
]
```

#### Для Шани (8) - Сатурн:
```python
upayas = [
    "शनिवार को काले वस्त्र धारण करें (Wear black clothes on Saturday)",
    "नीलम धारण करें (Wear Blue Sapphire)",
    "तिल और काले उड़द का दान करें (Donate sesame and black gram)"
]
```

## Мантры (मन्त्र)

### get_vedic_mantras(janma_ank: int)
Возвращает соответствующие планетарные мантры для каждого числа.

**Примеры мантр:**
```python
mantras = {
    1: ["ॐ ह्राम ह्रीम ह्राम सः सूर्याय नमः", "गायत्री मंत्र"],     # Сурья
    2: ["ॐ सोम सोमाय नमः", "चन्द्र मंत्र"],                        # Чандра
    3: ["ॐ ग्राम ग्रीम ग्राम सः गुरवे नमः", "बृहस्पति मंत्र"],      # Гуру
    8: ["ॐ शम शनैश्चराय नमः", "शनि मंत्र"],                       # Шани
    9: ["ॐ अम अंगारकाय नमः", "मंगल मंत्र"]                        # Мангал
}
```

## Драгоценные камни (रत्न)

### get_vedic_gemstones(janma_ank: int)
Рекомендует традиционные ведические драгоценные камни для каждой планеты.

**Соответствия:**
```python
gemstones = {
    1: ["माणिक्य (Ruby)", "गार्नेट (Garnet)"],              # Сурья
    2: ["मोती (Pearl)", "मूनस्टोन (Moonstone)"],             # Чандра  
    3: ["पुखराज (Yellow Sapphire)", "सिट्रिन (Citrine)"],   # Гуру
    6: ["हीरा (Diamond)", "ओपल (Opal)"],                    # Шукра
    8: ["नीलम (Blue Sapphire)", "अनुलोम (Iolite)"],        # Шани
    9: ["मूंगा (Red Coral)", "कारेलियन (Carnelian)"]       # Мангал
}
```

## Полный ведический анализ

### calculate_comprehensive_vedic_numerology(birth_date: str, name: str = "")
Выполняет комплексный ведический анализ личности.

**Параметры:**
- `birth_date` (str): Дата рождения в формате "DD.MM.YYYY"
- `name` (str): Полное имя (опционально)

**Возвращает:**
```python
{
    "janma_ank": int,              # Число рождения
    "nama_ank": int,               # Число имени
    "bhagya_ank": int,             # Число судьбы
    "atma_ank": int,               # Число души
    "shakti_ank": int,             # Число силы
    "graha_shakti": dict,          # Планетарные силы
    "mahadasha": str,              # Текущий главный период
    "antardasha": str,             # Текущий подпериод
    "yantra_matrix": list,         # Ведическая янтра
    "yantra_sums": dict,           # Суммы янтры
    "graha_positions": dict,       # Позиции планет
    "graha_names": dict,           # Названия планет
    "upayas": list,                # Средства гармонизации
    "mantras": list,               # Мантры
    "gemstones": list              # Драгоценные камни
}
```

## Генерация планетарных энергий

### generate_weekly_planetary_energy(birth_date: str)
Создает данные планетарных энергий на неделю для графиков.

**Алгоритм:**
1. Рассчитывает базовую энергию на основе Джанма анк
2. Модифицирует энергии для каждого дня недели
3. Учитывает текущую дату и планетарные влияния

**Возвращает:**
```python
[
    {
        "date": "2024-01-15",
        "day_name": "Monday", 
        "surya": 75,           # Энергия Солнца (0-100)
        "chandra": 85,         # Энергия Луны
        "mangal": 60,          # Энергия Марса
        "budha": 70,           # Энергия Меркурия
        "guru": 80,            # Энергия Юпитера
        "shukra": 65,          # Энергия Венеры
        "shani": 55,           # Энергия Сатурна
        "rahu": 45,            # Энергия Раху
        "ketu": 40             # Энергия Кету
    },
    # ... данные для остальных дней недели
]
```

## Ведические квизы

### get_randomized_quiz_questions(num_questions: int = 10)
Генерирует случайные вопросы для ведического квиза самопознания.

**Типы вопросов:**
1. **vedic_colors** - Цветовые предпочтения
2. **vedic_time** - Временные энергии
3. **vedic_elements** - Элементы природы
4. **problem_solving** - Подходы к решению проблем
5. **spirituality** - Духовное развитие

**Пример вопроса:**
```python
{
    "id": "vedic_1",
    "question": "Какой цвет лучше всего отражает вашу внутреннюю энергию?",
    "options": [
        {"text": "Огненно-красный (अग्नि)", "value": 1},
        {"text": "Лунно-серебристый (चाँदी)", "value": 2},
        {"text": "Солнечно-золотой (सुनहरा)", "value": 3},
        // ...
    ],
    "category": "vedic_colors"
}
```

## API Endpoints

### 1. Полный ведический анализ
```http
POST /api/vedic/comprehensive-analysis
Authorization: Bearer <token>
Content-Type: application/json

{
  "birth_date": "15.08.1985",
  "name": "Анна Смирнова"
}
```

**Ответ:**
```json
{
  "janma_ank": 1,
  "nama_ank": 7,
  "bhagya_ank": 1,
  "atma_ank": 6,
  "shakti_ank": 8,
  "graha_shakti": {
    "graha_1_सूर्य (Surya)": 2,
    "graha_5_बुध (Budha)": 2,
    "graha_8_शनि (Shani)": 2,
    "graha_9_मंगल (Mangal)": 1
  },
  "mahadasha": "सूर्य (Surya)",
  "antardasha": "चन्द्र (Chandra)",
  "upayas": [
    "सूर्य नमस्कार का अभ्यास करें (Practice Surya Namaskara)",
    "रविवार को लाल वस्त्र धारण करें (Wear red clothes on Sunday)"
  ],
  "mantras": ["ॐ ह्राम ह्रीम ह्राम सः सूर्याय नमः", "गायत्री मंत्र"],
  "gemstones": ["माणिक्य (Ruby)", "गार्नेट (Garnet)"]
}
```

### 2. Планетарные энергии на неделю
```http
POST /api/vedic/weekly-energy
Authorization: Bearer <token>
Content-Type: application/json

{
  "birth_date": "15.08.1985"
}
```

### 3. Ведический квиз
```http
GET /api/vedic/quiz-questions?count=10
Authorization: Bearer <token>
```

## Стоимость в кредитах

| Операция | Стоимость |
|----------|-----------|
| Полный ведический анализ | 2 кредита |
| Планетарные энергии (неделя) | 3 кредита |
| Ведический квиз | 1 кредит |
| Янтра анализ | 1 кредит |

## Интерпретации

### Планетарные качества

#### Сурья (सूर्य) - Солнце (1)
- **Положительные качества:** Лидерство, уверенность, благородство, щедрость
- **Негативные проявления:** Эгоизм, высокомерие, властность
- **Профессии:** Правительство, менеджмент, театр, ювелирное дело
- **Здоровье:** Сердце, позвоночник, правый глаз (мужчины)

#### Чандра (चन्द्र) - Луна (2)  
- **Положительные качества:** Интуиция, эмпатия, забота, адаптивность
- **Негативные проявления:** Эмоциональная нестабильность, капризность
- **Профессии:** Медицина, кулинария, мореплавание, психология
- **Здоровье:** Желудок, грудь, левый глаз (женщины), лимфа

#### Гуру (गुरु) - Юпитер (3)
- **Положительные качества:** Мудрость, знания, духовность, щедрость
- **Негативные проявления:** Догматизм, самонадеянность
- **Профессии:** Образование, право, религия, консалтинг
- **Здоровье:** Печень, жировая ткань, бедра

#### Раху (राहु) - Северный узел (4)
- **Положительные качества:** Инновации, технологии, материальный прогресс
- **Негативные проявления:** Иллюзии, обман, жадность
- **Профессии:** IT, исследования, нетрадиционные области
- **Здоровье:** Нервная система, кожа, аллергии

#### Будха (बुध) - Меркурий (5)
- **Положительные качества:** Интеллект, коммуникация, остроумие
- **Негативные проявления:** Поверхностность, непостоянство
- **Профессии:** Журналистика, торговля, математика, переводы
- **Здоровье:** Легкие, нервная система, руки

#### Шукра (शुक्र) - Венера (6)
- **Положительные качества:** Красота, искусство, любовь, гармония
- **Негативные проявления:** Материализм, чувственность
- **Профессии:** Искусство, дизайн, мода, развлечения
- **Здоровье:** Репродуктивная система, почки, горло

#### Кету (केतु) - Южный узел (7)
- **Положительные качества:** Духовность, интуиция, отрешенность
- **Негативные проявления:** Изоляция, фанатизм
- **Профессии:** Духовные практики, исследования, целительство
- **Здоровье:** Иммунная система, психические расстройства

#### Шани (शनि) - Сатурн (8)
- **Положительные качества:** Дисциплина, ответственность, выносливость
- **Негативные проявления:** Пессимизм, ограничения, медлительность
- **Профессии:** Инженерия, архитектура, право, металлургия
- **Здоровье:** Кости, зубы, колени, хронические болезни

#### Мангал (मंगल) - Марс (9)
- **Положительные качества:** Энергия, храбрость, справедливость
- **Негативные проявления:** Агрессия, гнев, конфликтность
- **Профессии:** Военное дело, спорт, хирургия, металлургия
- **Здоровье:** Кровь, мышцы, голова, лихорадка

## Практические рекомендации

### Усиление слабых планет
1. **Отсутствие планеты в янтре** - активная работа с упаями
2. **Одна цифра** - поддерживающие практики
3. **Избыток (4+ цифры)** - балансирующие упаи

### Благоприятные дни недели
- **Воскресенье (Сурья)** - для людей с числом 1
- **Понедельник (Чандра)** - для людей с числом 2
- **Вторник (Мангал)** - для людей с числом 9
- **Среда (Будха)** - для людей с числом 5
- **Четверг (Гуру)** - для людей с числом 3
- **Пятница (Шукра)** - для людей с числом 6
- **Суббота (Шани)** - для людей с числом 8

### Интеграция с западной нумерологией
Ведическая система дополняет классическую нумерологию:
- **Джанма анк** ≈ Число жизненного пути
- **Багья анк** ≈ Число судьбы
- **Атма анк** ≈ Число души
- **Янтра** ≈ Квадрат Пифагора с планетарными энергиями


