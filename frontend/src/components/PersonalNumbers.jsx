import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Alert, AlertDescription } from './ui/alert';
import { Dialog, DialogContent, DialogHeader, DialogTitle } from './ui/dialog';
import { Loader, Calculator, Menu, X, Info } from 'lucide-react';
import { useAuth } from './AuthContext';
import axios from 'axios';
import { PLANET_COLORS } from './constants/colors';
import { getBackendUrl } from '../utils/backendUrl';

const PersonalNumbers = ({ fullScreen = false, onBack }) => {
  const { user } = useAuth();
  const [results, setResults] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  
  // Detail modal state
  const [detailOpen, setDetailOpen] = useState(false);
  const [detailTitle, setDetailTitle] = useState('');
  const [detailText, setDetailText] = useState('');
  const [showFormula, setShowFormula] = useState(null);

  const backendUrl = getBackendUrl();

  useEffect(() => {
    if (user?.birth_date) calculate();
  }, [user?.birth_date]);

  const calculate = async () => {
    setLoading(true);
    setError('');
    try {
      const res = await axios.post(`${backendUrl}/api/numerology/personal-numbers`);
      setResults(res.data);
    } catch (e) {
      setError(e.response?.data?.detail || '–û—à–∏–±–∫–∞ —Ä–∞—Å—á—ë—Ç–∞');
    } finally {
      setLoading(false);
    }
  };

  const openDetail = (title, text) => { 
    setDetailTitle(title); 
    setDetailText(text); 
    setDetailOpen(true); 
  };

  const getNumberFormula = (type, value, birthDate) => {
    const date = birthDate || user?.birth_date || '';
    const cleanDate = date.replace(/\D/g, '');
    
    const formulas = {
      'soul_number': {
        title: '–ß–∏—Å–ª–æ –¥—É—à–∏ (–ß–î)',
        description: '–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ –¥–Ω—è –º–µ—Å—è—Ü–∞ —Ä–æ–∂–¥–µ–Ω–∏—è',
        calculation: `–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è: ${date.split('.')[0]} ‚Üí ${value}`,
        explanation: '–ß–∏—Å–ª–æ –¥—É—à–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à—É –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –ø—Ä–∏—Ä–æ–¥—É, –≤—Ä–æ–∂–¥—ë–Ω–Ω—ã–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Ç–∞–ª–∞–Ω—Ç—ã.',
        method: '–ë–µ—Ä—ë–º –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ –∏–∑ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è. –ï—Å–ª–∏ —á–∏—Å–ª–æ –¥–≤—É–∑–Ω–∞—á–Ω–æ–µ, —Å–∫–ª–∞–¥—ã–≤–∞–µ–º —Ü–∏—Ñ—Ä—ã –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–≥–æ (–∫—Ä–æ–º–µ 11, 22, 33).'
      },
      'mind_number': {
        title: '–ß–∏—Å–ª–æ —É–º–∞ (–ß–£)', 
        description: '–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ –ø–æ–ª–Ω–æ–π –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è',
        calculation: `${date} ‚Üí ${cleanDate.split('').join(' + ')} = ${value}`,
        explanation: '–ß–∏—Å–ª–æ —É–º–∞ –æ—Ç—Ä–∞–∂–∞–µ—Ç –≤–∞—à —Å–ø–æ—Å–æ–± –º—ã—à–ª–µ–Ω–∏—è, –ø–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏.',
        method: '–°–∫–ª–∞–¥—ã–≤–∞–µ–º –≤—Å–µ —Ü–∏—Ñ—Ä—ã –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –ø—Ä–∏–≤–æ–¥–∏–º –∫ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–º—É —á–∏—Å–ª—É (–∫—Ä–æ–º–µ –º–∞—Å—Ç–µ—Ä-—á–∏—Å–µ–ª 11, 22, 33).'
      },
      'destiny_number': {
        title: '–ß–∏—Å–ª–æ —Å—É–¥—å–±—ã (–ß–°)',
        description: '–ì–ª–∞–≤–Ω–æ–µ —á–∏—Å–ª–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏',
        calculation: `${date} ‚Üí ${cleanDate.split('').join(' + ')} = ${value}`,
        explanation: '–ß–∏—Å–ª–æ —Å—É–¥—å–±—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–∞—à –∂–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å, –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤ —ç—Ç–æ–π –∂–∏–∑–Ω–∏.',
        method: '–ò–¥–µ–Ω—Ç–∏—á–Ω–æ —á–∏—Å–ª—É —É–º–∞ - —Å–∫–ª–∞–¥—ã–≤–∞–µ–º –≤—Å–µ —Ü–∏—Ñ—Ä—ã –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–≥–æ —á–∏—Å–ª–∞.'
      },
      'helping_mind_number': {
        title: '–ü–æ–º–æ–≥–∞—é—â–µ–µ —á–∏—Å–ª–æ —É–º–∞ (–ß–£*)',
        description: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞—á–µ—Å—Ç–≤–∞ —É–º–∞',
        calculation: `–û—Å–æ–±—ã–π —Ä–∞—Å—á—ë—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ ${date} = ${value}`,
        explanation: '–ü–æ–º–æ–≥–∞—é—â–µ–µ —á–∏—Å–ª–æ —É–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–∞—á–µ—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏.',
        method: '–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º, —É—á–∏—Ç—ã–≤–∞—é—â–∏–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Ü–∏—Ñ—Ä –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –º–∞—Å—Ç–µ—Ä-—á–∏—Å–ª–∞.'
      },
      'wisdom_number': {
        title: '–ß–∏—Å–ª–æ –º—É–¥—Ä–æ—Å—Ç–∏ (–ß–ú)',
        description: '–ù–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å –¥—É—à–∏',
        calculation: `–†–∞—Å—á—ë—Ç –º—É–¥—Ä–æ—Å—Ç–∏ –¥–ª—è ${date} = ${value}`,
        explanation: '–ß–∏—Å–ª–æ –º—É–¥—Ä–æ—Å—Ç–∏ –æ—Ç—Ä–∞–∂–∞–µ—Ç –¥—É—Ö–æ–≤–Ω—ã–π –æ–ø—ã—Ç –¥—É—à–∏, –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–æ–ø–ª–æ—â–µ–Ω–∏—è—Ö.',
        method: '–°–ª–æ–∂–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –∞–Ω–∞–ª–∏–∑–µ –ø–æ–ª–Ω–æ–π –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è.'
      },
      'ruling_number': {
        title: '–ü—Ä–∞–≤—è—â–µ–µ —á–∏—Å–ª–æ (–ü–ß)',
        description: '–£–ø—Ä–∞–≤–ª—è—é—â–µ–µ —á–∏—Å–ª–æ –ª–∏—á–Ω–æ—Å—Ç–∏',
        calculation: `–ü—Ä–∞–≤—è—â–µ–µ —á–∏—Å–ª–æ –¥–ª—è ${date} = ${value}`,
        explanation: '–ü—Ä–∞–≤—è—â–µ–µ —á–∏—Å–ª–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ–º–∏–Ω–∏—Ä—É—é—â–∏–µ —á–µ—Ä—Ç—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –∏ —Å—Ç–∏–ª—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞.',
        method: '–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∫ —Å—É–º–º–∞ –≤—Å–µ—Ö —Ü–∏—Ñ—Ä –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è (–¥–µ–Ω—å + –º–µ—Å—è—Ü + –≥–æ–¥). –ú–∞—Å—Ç–µ—Ä-—á–∏—Å–ª–∞ 11 –∏ 22 –Ω–µ —Å–≤–æ–¥—è—Ç—Å—è –∫ –æ–¥–Ω–æ–π —Ü–∏—Ñ—Ä–µ.'
      }
    };

    return formulas[type] || {
      title: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —á–∏—Å–ª–æ',
      description: '–û–ø–∏—Å–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
      calculation: `${value}`,
      explanation: '–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.',
      method: '–ú–µ—Ç–æ–¥ —Ä–∞—Å—á—ë—Ç–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω.'
    };
  };

  const FormulaModal = ({ formula, onClose }) => (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div className="sticky top-0 bg-white border-b p-4 flex justify-between items-center">
          <h3 className="text-xl font-bold flex items-center">
            <Calculator className="w-6 h-6 mr-2 text-blue-500" />
            {formula.title}
          </h3>
          <button onClick={onClose} className="text-gray-500 hover:text-gray-700">
            <X className="w-6 h-6" />
          </button>
        </div>
        
        <div className="p-6 space-y-4">
          <div className="bg-blue-50 p-4 rounded-lg">
            <h4 className="font-semibold text-blue-800 mb-2">üßÆ –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞:</h4>
            <div className="font-mono text-sm">
              {formula.calculation}
            </div>
          </div>
          
          <div className="bg-green-50 p-4 rounded-lg">
            <h4 className="font-semibold text-green-800 mb-2">üìñ –ú–µ—Ç–æ–¥ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è:</h4>
            <p className="text-sm">{formula.method}</p>
          </div>
          
          <div className="bg-purple-50 p-4 rounded-lg">
            <h4 className="font-semibold text-purple-800 mb-2">üí´ –ó–Ω–∞—á–µ–Ω–∏–µ —á–∏—Å–ª–∞:</h4>
            <p className="text-sm">{formula.explanation}</p>
          </div>
        </div>
      </div>
    </div>
  );

  const planetLabelColor = (digit) => {
    switch (digit) {
      case 1: return PLANET_COLORS.Surya;
      case 2: return PLANET_COLORS.Chandra;
      case 3: return PLANET_COLORS.Guru;
      case 4: return PLANET_COLORS.Rahu;
      case 5: return PLANET_COLORS.Buddhi;
      case 6: return PLANET_COLORS.Shukra;
      case 7: return PLANET_COLORS.Ketu;
      case 8: return PLANET_COLORS.Shani;
      case 9: return PLANET_COLORS.Mangal;
      default: return '#475569';
    }
  };

  // Detailed interpretations for personal numbers
  const getNumberInterpretation = (type, number) => {
    const interpretations = {
      soul: {
        description: '–ß–∏—Å–ª–æ –î—É—à–∏ (–ß–î) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ –¥–Ω—é —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à—É –∏—Å—Ç–∏–Ω–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –ø—Ä–∏—Ä–æ–¥—É –∏ —Ç–æ, –∫–µ–º –≤—ã —è–≤–ª—è–µ—Ç–µ—Å—å –Ω–∞ —Å–∞–º–æ–º –≥–ª—É–±–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ.',
        calculation: '–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—É—Ç–µ–º —Å–≤–µ–¥–µ–Ω–∏—è –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è –∫ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–º—É —á–∏—Å–ª—É. –ù–∞–ø—Ä–∏–º–µ—Ä: 10.01.1982 ‚Üí –¥–µ–Ω—å 10 ‚Üí 1+0 = 1',
        details: {
          1: '–ß–∏—Å–ª–æ –î—É—à–∏ 1 (–°–æ–ª–Ω—Ü–µ): –õ–∏–¥–µ—Ä –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–∏—Å—Ç. –í—ã –ø—Ä–∏—Ä–æ–∂–¥–µ–Ω–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —Å —Å–∏–ª—å–Ω–æ–π –≤–æ–ª–µ–π –∏ —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ–º –∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –≤–µ—Å—Ç–∏ –¥—Ä—É–≥–∏—Ö –∑–∞ —Å–æ–±–æ–π, –ø—Ä–æ—è–≤–ª—è—è –≤–µ–ª–∏–∫–æ–¥—É—à–∏–µ –∏ –º—É–¥—Ä–æ—Å—Ç—å.',
          2: '–ß–∏—Å–ª–æ –î—É—à–∏ 2 (–õ—É–Ω–∞): –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Ç—É—Ä–∞. –í—ã –æ–±–ª–∞–¥–∞–µ—Ç–µ –∏–Ω—Ç—É–∏—Ü–∏–µ–π, —É–º–µ–Ω–∏–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∞—Ä–º–æ–Ω–∏—é. –í–∞—à–∞ —Å–∏–ª–∞ ‚Äî –≤ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –ª—é–¥–µ–π.',
          3: '–ß–∏—Å–ª–æ –î—É—à–∏ 3 (–Æ–ø–∏—Ç–µ—Ä): –ú—É–¥—Ä—ã–π —É—á–∏—Ç–µ–ª—å –∏ –æ–ø—Ç–∏–º–∏—Å—Ç. –í—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –∑–Ω–∞–Ω–∏—è–º, –ª—é–±–∏—Ç–µ –¥–µ–ª–∏—Ç—å—Å—è –æ–ø—ã—Ç–æ–º –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –¥—Ä—É–≥–∏—Ö. –í–∞—à–∞ –º–∏—Å—Å–∏—è ‚Äî –Ω–µ—Å—Ç–∏ —Å–≤–µ—Ç –º—É–¥—Ä–æ—Å—Ç–∏ –≤ –º–∏—Ä.',
          4: '–ß–∏—Å–ª–æ –î—É—à–∏ 4 (–†–∞—Ö—É): –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä –∏ —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–µ—Ä. –í—ã –º—ã—Å–ª–∏—Ç–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ, —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –ø–µ—Ä–µ–º–µ–Ω–∞–º –∏ –∏–º–µ–µ—Ç–µ —Å–∏–ª—å–Ω—ã–µ –∞–º–±–∏—Ü–∏–∏. –í–∞—à –ø—É—Ç—å ‚Äî —á–µ—Ä–µ–∑ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –∫ –≤–µ–ª–∏–∫–∏–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º.',
          5: '–ß–∏—Å–ª–æ –î—É—à–∏ 5 (–ú–µ—Ä–∫—É—Ä–∏–π): –ö–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª. –í—ã –æ–±–ª–∞–¥–∞–µ—Ç–µ –∂–∏–≤—ã–º —É–º–æ–º, –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –∫ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏. –í–∞—à–∞ —Ä–æ–ª—å ‚Äî —Å–≤—è–∑—ã–≤–∞—Ç—å –ª—é–¥–µ–π –∏ –∏–¥–µ–∏.',
          6: '–ß–∏—Å–ª–æ –î—É—à–∏ 6 (–í–µ–Ω–µ—Ä–∞): –¢–≤–æ—Ä–µ—Ü –∫—Ä–∞—Å–æ—Ç—ã –∏ –≥–∞—Ä–º–æ–Ω–∏–∏. –í—ã —Ü–µ–Ω–∏—Ç–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ, —É–º–µ–µ—Ç–µ –ª—é–±–∏—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —É—é—Ç. –í–∞—à–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –ø—Ä–∏–Ω–æ—Å–∏—Ç—å –≤ –º–∏—Ä –∫—Ä–∞—Å–æ—Ç—É –∏ —Ä–∞–¥–æ—Å—Ç—å.',
          7: '–ß–∏—Å–ª–æ –î—É—à–∏ 7 (–ö–µ—Ç—É): –ú–∏—Å—Ç–∏–∫ –∏ –¥—É—Ö–æ–≤–Ω—ã–π –∏—Å–∫–∞—Ç–µ–ª—å. –í—ã –æ–±–ª–∞–¥–∞–µ—Ç–µ –≥–ª—É–±–æ–∫–æ–π –∏–Ω—Ç—É–∏—Ü–∏–µ–π –∏ —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –ø–æ–∑–Ω–∞–Ω–∏—é —Ç–∞–π–Ω –∂–∏–∑–Ω–∏. –í–∞—à –ø—É—Ç—å ‚Äî –¥—É—Ö–æ–≤–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏ –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏–º –≤ –ø–æ–∏—Å–∫–µ –∏—Å—Ç–∏–Ω—ã.',
          8: '–ß–∏—Å–ª–æ –î—É—à–∏ 8 (–°–∞—Ç—É—Ä–Ω): –ü—Ä–∞–∫—Ç–∏–∫ –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å. –í—ã –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∏—Ä–æ–≤–∞–Ω—ã, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã –∏ —É–º–µ–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—á–Ω—ã–µ –æ—Å–Ω–æ–≤—ã. –í–∞—à–∞ –º–∏—Å—Å–∏—è ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ—Ä—è–¥–æ–∫.',
          9: '–ß–∏—Å–ª–æ –î—É—à–∏ 9 (–ú–∞—Ä—Å): –í–æ–∏–Ω –∏ –∑–∞—â–∏—Ç–Ω–∏–∫. –í—ã –æ–±–ª–∞–¥–∞–µ—Ç–µ —ç–Ω–µ—Ä–≥–∏–µ–π, —Å–∏–ª–æ–π –≤–æ–ª–∏ –∏ —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ–º –∫ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏. –í–∞—à–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî —Å–ª—É–∂–∏—Ç—å –≤—ã—Å—à–∏–º –∏–¥–µ–∞–ª–∞–º –∏ –∑–∞—â–∏—â–∞—Ç—å —Å–ª–∞–±—ã—Ö.'
        }
      },
      mind: {
        description: '–ß–∏—Å–ª–æ –£–º–∞ (–ß–£) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ –º–µ—Å—è—Ü—É —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –≤—ã –º—ã—Å–ª–∏—Ç–µ, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —Ä–µ—à–µ–Ω–∏—è.',
        calculation: '–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—É—Ç–µ–º —Å–≤–µ–¥–µ–Ω–∏—è –º–µ—Å—è—Ü–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –∫ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–º—É —á–∏—Å–ª—É. –ù–∞–ø—Ä–∏–º–µ—Ä: 10.01.1982 ‚Üí –º–µ—Å—è—Ü 01 ‚Üí 0+1 = 1',
        details: {
          1: '–ß–∏—Å–ª–æ –£–º–∞ 1: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –í—ã –¥—É–º–∞–µ—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –Ω–µ —Å–ª–µ–¥—É–µ—Ç–µ —Ç–æ–ª–ø–µ –∏ —á–∞—Å—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.',
          2: '–ß–∏—Å–ª–æ –£–º–∞ 2: –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–µ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –í—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —Ä–µ—à–µ–Ω–∏—è —Å–µ—Ä–¥—Ü–µ–º, —Ö–æ—Ä–æ—à–æ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª—é–¥–µ–π –∏ —Å–∏—Ç—É–∞—Ü–∏–∏.',
          3: '–ß–∏—Å–ª–æ –£–º–∞ 3: –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –í—ã –≤–∏–¥–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–µ –≤–∏–¥—è—Ç –ø—Ä–æ–±–ª–µ–º—ã, –∏ –º—ã—Å–ª–∏—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω–æ.',
          4: '–ß–∏—Å–ª–æ –£–º–∞ 4: –ü—Ä–∞–∫—Ç–∏—á–Ω–æ–µ –∏ –º–µ—Ç–æ–¥–∏—á–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –í—ã –ª—é–±–∏—Ç–µ –ø–æ—Ä—è–¥–æ–∫, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á.',
          5: '–ß–∏—Å–ª–æ –£–º–∞ 5: –ë—ã—Å—Ç—Ä–æ–µ –∏ –≥–∏–±–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –í—ã –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç–µ—Å—å –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ –∏ –±—ã—Å—Ç—Ä–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.',
          6: '–ß–∏—Å–ª–æ –£–º–∞ 6: –ì–∞—Ä–º–æ–Ω–∏—á–Ω–æ–µ –∏ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –í—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –±–∞–ª–∞–Ω—Å—É –∏ –∫—Ä–∞—Å–æ—Ç–µ –≤ —Å–≤–æ–∏—Ö —Ä–µ—à–µ–Ω–∏—è—Ö.',
          7: '–ß–∏—Å–ª–æ –£–º–∞ 7: –ì–ª—É–±–æ–∫–æ–µ –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –í—ã –ª—é–±–∏—Ç–µ –¥–æ–∫–∞–ø—ã–≤–∞—Ç—å—Å—è –¥–æ —Å—É—Ç–∏ –∏ –ø–æ–Ω–∏–º–∞—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã.',
          8: '–ß–∏—Å–ª–æ –£–º–∞ 8: –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –í—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –Ω–∞ –≥–æ–¥—ã –≤–ø–µ—Ä–µ–¥ –∏ –≤–∏–¥–∏—Ç–µ –±–æ–ª—å—à—É—é –∫–∞—Ä—Ç–∏–Ω—É.',
          9: '–ß–∏—Å–ª–æ –£–º–∞ 9: –ò–¥–µ–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –í—ã –¥—É–º–∞–µ—Ç–µ –æ –±–ª–∞–≥–µ –º–Ω–æ–≥–∏—Ö –∏ —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –≤—ã—Å—à–∏–º —Ü–µ–ª—è–º.'
        }
      },
      destiny: {
        description: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã (–ß–°) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Å—É–º–º–∞ –¥–Ω—è, –º–µ—Å—è—Ü–∞ –∏ –≥–æ–¥–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–∫–∞–∫ —á–∏—Å–µ–ª) –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à –∂–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å, –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ. –í–°–ï–ì–î–ê –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–º—É —á–∏—Å–ª—É.',
        calculation: '–°—É–º–º–∞ –¥–Ω—è + –º–µ—Å—è—Ü + –≥–æ–¥ –∫–∞–∫ —á–∏—Å–µ–ª, –í–°–ï–ì–î–ê —Å–≤–æ–¥–∏—Ç—Å—è –∫ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–º—É. –ù–∞–ø—Ä–∏–º–µ—Ä: 10.01.1982 ‚Üí 10 + 1 + 1982 = 1993 ‚Üí 1+9+9+3 = 22 ‚Üí 2+2 = 4',
        details: {
          1: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã 1: –ü—É—Ç—å –ª–∏–¥–µ—Ä–∞. –í–∞—à–∞ —Å—É–¥—å–±–∞ ‚Äî —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ª–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞, –±—ã—Ç—å –ø–µ—Ä–≤–æ–ø—Ä–æ—Ö–æ–¥—Ü–µ–º –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –¥—Ä—É–≥–∏—Ö —Å–≤–æ–∏–º –ø—Ä–∏–º–µ—Ä–æ–º.',
          2: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã 2: –ü—É—Ç—å –º–∏—Ä–æ—Ç–≤–æ—Ä—Ü–∞. –í–∞—à–∞ —Å—É–¥—å–±–∞ ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∞—Ä–º–æ–Ω–∏—é, –ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º –Ω–∞—Ö–æ–¥–∏—Ç—å –æ–±—â–∏–π —è–∑—ã–∫ –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –¥–∏–ø–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.',
          3: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã 3: –ü—É—Ç—å —Ç–≤–æ—Ä—Ü–∞. –í–∞—à–∞ —Å—É–¥—å–±–∞ ‚Äî —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –¥–µ–ª–∏—Ç—å—Å—è –∑–Ω–∞–Ω–∏—è–º–∏ –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –¥—Ä—É–≥–∏—Ö –Ω–∞ —Ä–æ—Å—Ç.',
          4: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã 4: –ü—É—Ç—å —Å—Ç—Ä–æ–∏—Ç–µ–ª—è. –í–∞—à–∞ —Å—É–¥—å–±–∞ ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—á–Ω—ã–µ –æ—Å–Ω–æ–≤—ã, —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –∏ —Å–ª—É–∂–∏—Ç—å –æ–±—â–µ—Å—Ç–≤—É.',
          5: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã 5: –ü—É—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è. –í–∞—à–∞ —Å—É–¥—å–±–∞ ‚Äî –ø–æ–∑–Ω–∞–≤–∞—Ç—å –º–∏—Ä, —Ä–∞–∑–≤–∏–≤–∞—Ç—å –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –ø–µ—Ä–µ–º–µ–Ω–∞–º.',
          6: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã 6: –ü—É—Ç—å –∑–∞–±–æ—Ç–ª–∏–≤–æ–≥–æ. –í–∞—à–∞ —Å—É–¥—å–±–∞ ‚Äî —Å–ª—É–∂–∏—Ç—å —Å–µ–º—å–µ –∏ –æ–±—â–µ—Å—Ç–≤—É, —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫—Ä–∞—Å–æ—Ç—É –∏ –≥–∞—Ä–º–æ–Ω–∏—é –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.',
          7: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã 7: –ü—É—Ç—å –º—É–¥—Ä–µ—Ü–∞. –í–∞—à–∞ —Å—É–¥—å–±–∞ ‚Äî —Ä–∞–∑–≤–∏–≤–∞—Ç—å –¥—É—Ö–æ–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –∏—Å–∫–∞—Ç—å –∏—Å—Ç–∏–Ω—É –∏ –¥–µ–ª–∏—Ç—å—Å—è –º—É–¥—Ä–æ—Å—Ç—å—é —Å –¥—Ä—É–≥–∏–º–∏.',
          8: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã 8: –ü—É—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π. –í–∞—à–∞ —Å—É–¥—å–±–∞ ‚Äî —Ä–∞–∑–≤–∏–≤–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –¥–æ—Å—Ç–∏–≥–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–≥–æ —É—Å–ø–µ—Ö–∞ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.',
          9: '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã 9: –ü—É—Ç—å —Å–ª—É–∂–µ–Ω–∏—è. –í–∞—à–∞ —Å—É–¥—å–±–∞ ‚Äî —Å–ª—É–∂–∏—Ç—å —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤—É, —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ –∏ –ø–æ–º–æ–≥–∞—Ç—å –≤ —Ä–µ—à–µ–Ω–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á.'
        }
      },
      helping_mind: {
        description: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ (–ß–£*) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Å—É–º–º–∞ –¥–Ω—è –∏ –º–µ—Å—è—Ü–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–∫–∞–∫ —á–∏—Å–µ–ª). –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –∏ —Å–ø–æ—Å–æ–±—ã –º—ã—à–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤–∞—Å.',
        calculation: '–°—É–º–º–∞ –¥–Ω—è –∏ –º–µ—Å—è—Ü–∞ –∫–∞–∫ —á–∏—Å–µ–ª. –ù–∞–ø—Ä–∏–º–µ—Ä: 10.01.1982 ‚Üí –¥–µ–Ω—å 10 + –º–µ—Å—è—Ü 1 = 11 ‚Üí 11 (–æ—Å—Ç–∞–µ—Ç—Å—è –º–∞—Å—Ç–µ—Ä-—á–∏—Å–ª–æ)',
        details: {
          1: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ 1: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º—ã—à–ª–µ–Ω–∏—è –∏ –ª–∏–¥–µ—Ä—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è.',
          2: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ 2: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç—É–∏—Ü–∏—é, —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç.',
          3: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ 3: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –æ–ø—Ç–∏–º–∏–∑–º, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è –∏ –æ–±—É—á–µ–Ω–∏–µ.',
          4: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ 4: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å, –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å –∏ —Ç–µ—Ä–ø–µ–Ω–∏–µ.',
          5: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ 5: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –∏ –±—ã—Å—Ç—Ä–æ–µ –º—ã—à–ª–µ–Ω–∏–µ.',
          6: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ 6: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –≥–∞—Ä–º–æ–Ω–∏–∏, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∏ –∑–∞–±–æ—Ç—É –æ –¥—Ä—É–≥–∏—Ö.',
          7: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ 7: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑, –∏–Ω—Ç—É–∏—Ü–∏—é –∏ –¥—É—Ö–æ–≤–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ.',
          8: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ 8: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.',
          9: '–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–∏—Å–ª–æ –£–º–∞ 9: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ —à–∏—Ä–æ–∫–æ–µ –≤–∏–¥–µ–Ω–∏–µ, –∏–¥–µ–∞–ª–∏–∑–º –∏ —Å–ª—É–∂–µ–Ω–∏–µ –≤—ã—Å—à–∏–º —Ü–µ–ª—è–º.'
        }
      },
      wisdom: {
        description: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ (–ß–ú) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Å—É–º–º–∞ –ß–∏—Å–ª–∞ –°—É–¥—å–±—ã + –ø–æ–ª–Ω–æ–µ —á–∏—Å–ª–æ –∏–º–µ–Ω–∏. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–π –º—É–¥—Ä–æ—Å—Ç–∏.',
        calculation: '–°—É–º–º–∞ –ß–∏—Å–ª–∞ –°—É–¥—å–±—ã + –ø–æ–ª–Ω–æ–µ —á–∏—Å–ª–æ –∏–º–µ–Ω–∏. –ù–∞–ø—Ä–∏–º–µ—Ä: 10.01.1982 ‚Üí –ß–°(22) + —á–∏—Å–ª–æ –∏–º–µ–Ω–∏ = (—Ä–∞—Å—á–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–º–µ–Ω–∏)',
        details: {
          1: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ 1: –ú—É–¥—Ä–æ—Å—Ç—å –ª–∏–¥–µ—Ä—Å—Ç–≤–∞ ‚Äî —É–º–µ–Ω–∏–µ –≤–µ—Å—Ç–∏ –¥—Ä—É–≥–∏—Ö —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é.',
          2: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ 2: –ú—É–¥—Ä–æ—Å—Ç—å —Å–µ—Ä–¥—Ü–∞ ‚Äî —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–Ω–∏–º–∞—Ç—å —ç–º–æ—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∞—Ä–º–æ–Ω–∏—é.',
          3: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ 3: –ú—É–¥—Ä–æ—Å—Ç—å —É—á–∏—Ç–µ–ª—è ‚Äî —É–º–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–Ω–∞–Ω–∏—è –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –Ω–∞ —Ä–æ—Å—Ç.',
          4: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ 4: –ú—É–¥—Ä–æ—Å—Ç—å —Å—Ç—Ä–æ–∏—Ç–µ–ª—è ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—á–Ω—ã–µ –æ—Å–Ω–æ–≤—ã.',
          5: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ 5: –ú—É–¥—Ä–æ—Å—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞ ‚Äî —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–≤—è–∑–∏.',
          6: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ 6: –ú—É–¥—Ä–æ—Å—Ç—å –∑–∞–±–æ—Ç–ª–∏–≤–æ–≥–æ ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ª—é–±–≤–∏ –∏ —Å–ª—É–∂–µ–Ω–∏—è –¥—Ä—É–≥–∏–º.',
          7: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ 7: –ú—É–¥—Ä–æ—Å—Ç—å –º–∏—Å—Ç–∏–∫–∞ ‚Äî —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–∏–¥–µ—Ç—å –≥–ª—É–±–æ–∫–∏–µ –∏—Å—Ç–∏–Ω—ã –∏ –¥—É—Ö–æ–≤–Ω—ã–µ –∑–∞–∫–æ–Ω—ã.',
          8: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ 8: –ú—É–¥—Ä–æ—Å—Ç—å –ø—Ä–∞–≤–∏—Ç–µ–ª—è ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞ –∏ –∑–∞–∫–æ–Ω–æ–≤ —É—Å–ø–µ—Ö–∞.',
          9: '–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏ 9: –ú—É–¥—Ä–æ—Å—Ç—å –≥—É–º–∞–Ω–∏—Å—Ç–∞ ‚Äî —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–∏–¥–µ—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–æ –≤—Å–µ–≥–æ –∏ —Å–ª—É–∂–∏—Ç—å –æ–±—â–µ–º—É –±–ª–∞–≥—É.'
        }
      },
      ruling: {
        description: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ (–ü–ß) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –≤—ã —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ —Å–≤–æ–µ–π –∂–∏–∑–Ω—å—é –∏ –∫–∞–∫–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –¥–æ–º–∏–Ω–∏—Ä—É—é—Ç –≤ –≤–∞—à–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ.',
        calculation: '–°—É–º–º–∞ –≤—Å–µ—Ö —Ü–∏—Ñ—Ä –¥–∞—Ç—ã, –º–µ—Å—è—Ü–∞ –∏ –≥–æ–¥–∞ —Ä–æ–∂–¥–µ–Ω–∏—è. –ò—Å–∫–ª—é—á–µ–Ω–∏—è: 11 –∏ 22 –Ω–µ —Å–≤–æ–¥—è—Ç—Å—è –∫ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–º—É. –ù–∞–ø—Ä–∏–º–µ—Ä: 10.01.1982 ‚Üí 1+0+0+1+1+9+8+2 = 22 ‚Üí –æ—Å—Ç–∞–µ—Ç—Å—è 22 (–º–∞—Å—Ç–µ—Ä-—á–∏—Å–ª–æ)',
        details: {
          1: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 1: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ª–∏–¥–µ—Ä—Å—Ç–≤–æ, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏ –ª–∏—á–Ω—É—é —Å–∏–ª—É.',
          2: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, –¥–∏–ø–ª–æ–º–∞—Ç–∏—é –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –º—É–¥—Ä–æ—Å—Ç—å.',
          3: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 3: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –æ–ø—Ç–∏–º–∏–∑–º –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å.',
          4: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 4: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–æ—Ä—è–¥–æ–∫, —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å.',
          5: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 5: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –∏ —Å–≤–æ–±–æ–¥—É.',
          6: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 6: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≥–∞—Ä–º–æ–Ω–∏—é, –∫—Ä–∞—Å–æ—Ç—É –∏ —Å–ª—É–∂–µ–Ω–∏–µ –¥—Ä—É–≥–∏–º.',
          7: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 7: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å, –∏–Ω—Ç—É–∏—Ü–∏—é –∏ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ.',
          8: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 8: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–º–±–∏—Ü–∏–∏, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.',
          9: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 9: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∏–¥–µ–∞–ª–∏–∑–º, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å –∏ —Å–ª—É–∂–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤—É.',
          11: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 11: –ú–∞—Å—Ç–µ—Ä-—á–∏—Å–ª–æ. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤—ã—Å—à—É—é –∏–Ω—Ç—É–∏—Ü–∏—é, –¥—É—Ö–æ–≤–Ω–æ–µ –ª–∏–¥–µ—Ä—Å—Ç–≤–æ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –Ω–∞ –ø—É—Ç–∏ –∫ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—é.',
          22: '–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ 22: –ú–∞—Å—Ç–µ—Ä-—Å—Ç—Ä–æ–∏—Ç–µ–ª—å. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ —Å–ª—É–∂–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤—É —á–µ—Ä–µ–∑ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.'
        }
      }
    };
    
    const typeInfo = interpretations[type];
    if (!typeInfo) return '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞';
    
    const fullText = `${typeInfo.description}

–ö–ê–ö –†–ê–°–°–ß–ò–¢–´–í–ê–ï–¢–°–Ø:
${typeInfo.calculation}

–î–ï–¢–ê–õ–¨–ù–ê–Ø –ò–ù–¢–ï–†–ü–†–ï–¢–ê–¶–ò–Ø:
${typeInfo.details[number] || '–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞'}`;
    
    return fullText;
  };

  if (loading) {
    return (
      <Card>
        <CardContent className="flex items-center justify-center py-12">
          <Loader className="w-6 h-6 animate-spin mr-2" />
          <span>–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞...</span>
        </CardContent>
      </Card>
    );
  }

  if (error) {
    return (
      <Card>
        <CardContent className="py-12">
          <Alert variant="destructive">
            <AlertDescription>{error}</AlertDescription>
          </Alert>
          <Button onClick={calculate} className="mt-4 w-full">
            –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
          </Button>
        </CardContent>
      </Card>
    );
  }

  if (!results) {
    return (
      <Card>
        <CardContent className="py-12 text-center">
          <Calculator className="w-12 h-12 text-muted-foreground mx-auto mb-4" />
          <p className="text-muted-foreground">
            –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª
          </p>
          <Button onClick={calculate} className="mt-4 numerology-gradient">
            –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —á–∏—Å–ª–∞
          </Button>
        </CardContent>
      </Card>
    );
  }

  const FloatingMenu = () => (
    <div className="fixed top-4 left-4 z-50">
      <Button 
        onClick={() => {
          if (onBack) {
            onBack();
          } else {
            // Fallback –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
            window.location.reload();
          }
        }}
        className="bg-white/90 backdrop-blur-sm text-gray-700 hover:bg-white shadow-lg border"
      >
        <Menu className="w-4 h-4 mr-2" />
        –ù–∞–∑–∞–¥
      </Button>
    </div>
  );

  const PersonalNumberCard = ({ title, value, type, shortDescription }) => (
    <div className="p-4 rounded-xl bg-white shadow border text-center hover:bg-slate-50 transition-colors">
      <div className="text-xs text-gray-500 mb-1">{title}</div>
      <div 
        className="text-3xl font-bold mb-2 cursor-pointer hover:scale-110 transition-transform" 
        style={{ color: planetLabelColor(value) }}
        onClick={() => openDetail(title, getNumberInterpretation(type, value))}
      >
        {value}
      </div>
      <div className="text-xs text-gray-600 leading-tight mb-2">{shortDescription}</div>
      <Button
        variant="ghost"
        size="sm"
        onClick={() => setShowFormula(getNumberFormula(type + '_number', value, user?.birth_date))}
        className="text-xs text-blue-600 hover:text-blue-800 p-1 h-auto"
      >
        <Calculator className="w-3 h-3 mr-1" />
        –§–æ—Ä–º—É–ª–∞
      </Button>
    </div>
  );

  const PlanetaryStrengthChart = () => {
    if (!results.planetary_strength) return null;

    const planetNames = ['–°–æ–ª–Ω—Ü–µ', '–õ—É–Ω–∞', '–ú–∞—Ä—Å', '–ú–µ—Ä–∫—É—Ä–∏–π', '–Æ–ø–∏—Ç–µ—Ä', '–í–µ–Ω–µ—Ä–∞', '–°–∞—Ç—É—Ä–Ω'];
    const weekdays = ['–í–°', '–ü–ù', '–í–¢', '–°–†', '–ß–¢', '–ü–¢', '–°–ë'];
    const planetColors = [
      PLANET_COLORS.Surya,    // –°–æ–ª–Ω—Ü–µ
      PLANET_COLORS.Chandra,  // –õ—É–Ω–∞
      PLANET_COLORS.Mangal,   // –ú–∞—Ä—Å
      PLANET_COLORS.Buddhi,   // –ú–µ—Ä–∫—É—Ä–∏–π
      PLANET_COLORS.Guru,     // –Æ–ø–∏—Ç–µ—Ä
      PLANET_COLORS.Shukra,   // –í–µ–Ω–µ—Ä–∞
      PLANET_COLORS.Shani     // –°–∞—Ç—É—Ä–Ω
    ];

    // –°–æ–∑–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞: –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ -> —Å–∏–ª–∞ –ø–ª–∞–Ω–µ—Ç—ã
    const chartData = weekdays.map((day, index) => {
      const planet = planetNames[index];
      const strength = results.planetary_strength[planet] || 0;
      const color = planetColors[index];
      
      return {
        day,
        planet,
        strength,
        color
      };
    });

    return (
      <div className="mt-6">
        <h4 className="text-lg font-semibold mb-4 text-center">–°–∏–ª–∞ –ü–ª–∞–Ω–µ—Ç –ø–æ –î–Ω—è–º –ù–µ–¥–µ–ª–∏</h4>
        <div className="text-xs text-gray-600 mb-4 text-center">
          –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ —Ä–æ–∂–¥–µ–Ω–∏—è: {results.birth_weekday}
        </div>
        
        {/* –ì—Ä–∞—Ñ–∏–∫ —Å —Å–µ—Ç–∫–æ–π */}
        <div className="bg-gray-900 rounded-lg p-4 relative overflow-hidden">
          <svg 
            viewBox="0 0 700 400" 
            className="w-full h-64"
            style={{ background: 'linear-gradient(180deg, #1f2937 0%, #111827 100%)' }}
          >
            {/* –°–µ—Ç–∫–∞ */}
            {/* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ */}
            {Array.from({length: 8}, (_, i) => (
              <line 
                key={`v-${i}`}
                x1={100 + i * 80} 
                y1={50} 
                x2={100 + i * 80} 
                y2={350} 
                stroke="rgba(255,255,255,0.2)" 
                strokeWidth="1"
              />
            ))}
            
            {/* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ */}
            {Array.from({length: 11}, (_, i) => (
              <line 
                key={`h-${i}`}
                x1={100} 
                y1={50 + i * 30} 
                x2={660} 
                y2={50 + i * 30} 
                stroke="rgba(255,255,255,0.2)" 
                strokeWidth="1"
              />
            ))}
            
            {/* –¶–∏—Ñ—Ä—ã –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ (0-9) */}
            {Array.from({length: 10}, (_, i) => (
              <text 
                key={`y-label-${i}`}
                x="85" 
                y={350 - i * 30} 
                fill="rgba(255,255,255,0.7)" 
                fontSize="14" 
                textAnchor="end"
                dominantBaseline="middle"
              >
                {i}
              </text>
            ))}
            
            {/* –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */}
            {weekdays.map((day, i) => (
              <text 
                key={`x-label-${i}`}
                x={140 + i * 80} 
                y="370" 
                fill="rgba(255,255,255,0.8)" 
                fontSize="16" 
                textAnchor="middle"
                fontWeight="bold"
              >
                {day}
              </text>
            ))}
            
            {/* –õ–∏–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ */}
            <polyline
              points={chartData.map((point, i) => 
                `${140 + i * 80},${350 - point.strength * 30}`
              ).join(' ')}
              fill="none"
              stroke="#10b981"
              strokeWidth="3"
              strokeLinejoin="round"
            />
            
            {/* –¢–æ—á–∫–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ */}
            {chartData.map((point, i) => (
              <g key={`point-${i}`}>
                <circle
                  cx={140 + i * 80}
                  cy={350 - point.strength * 30}
                  r="8"
                  fill={point.color}
                  stroke="white"
                  strokeWidth="2"
                />
                <text
                  x={140 + i * 80}
                  y={350 - point.strength * 30}
                  fill="white"
                  fontSize="12"
                  textAnchor="middle"
                  dominantBaseline="middle"
                  fontWeight="bold"
                >
                  {point.strength}
                </text>
              </g>
            ))}
          </svg>
        </div>

        {/* –õ–µ–≥–µ–Ω–¥–∞ –ø–ª–∞–Ω–µ—Ç */}
        <div className="mt-4 grid grid-cols-4 md:grid-cols-7 gap-2">
          {chartData.map((point, index) => (
            <div key={point.planet} className="text-center p-2 rounded-lg bg-gray-50 border">
              <div 
                className="text-sm font-semibold mb-1"
                style={{ color: point.color }}
              >
                {point.planet}
              </div>
              <div className="text-xs text-gray-500">{point.day}</div>
              <div className="text-lg font-bold text-gray-800">
                {point.strength}
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  };

  return (
    <div className={`${fullScreen ? 'min-h-[calc(100vh-4rem)] py-3' : ''}`}>
      {fullScreen && <FloatingMenu />}
      
      {!fullScreen && (
        <Card className="numerology-gradient">
          <CardHeader className="text-white">
            <CardTitle className="text-2xl">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞</CardTitle>
            <CardDescription className="text-white/90">
              –í–∞—à–∏ –∫–ª—é—á–µ–≤—ã–µ –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã: {user?.birth_date}
            </CardDescription>
          </CardHeader>
        </Card>
      )}

      <Card>
        {fullScreen && (
          <CardHeader>
            <CardTitle>–í–∞—à–∏ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ß–∏—Å–ª–∞</CardTitle>
            <CardDescription>
              –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–µ —á–∏—Å–ª–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
            </CardDescription>
          </CardHeader>
        )}
        <CardContent className="space-y-6">
          
          {/* –û—Å–Ω–æ–≤–Ω—ã–µ —á–∏—Å–ª–∞ */}
          <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
            <PersonalNumberCard 
              title="–ß–î (–ß–∏—Å–ª–æ –î—É—à–∏)"
              value={results.soul_number}
              type="soul"
              shortDescription="–í–∞—à–∞ –∏—Å—Ç–∏–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å"
            />
            <PersonalNumberCard 
              title="–ß–£ (–ß–∏—Å–ª–æ –£–º–∞)"
              value={results.mind_number}
              type="mind"
              shortDescription="–ö–∞–∫ –≤—ã –º—ã—Å–ª–∏—Ç–µ"
            />
            <PersonalNumberCard 
              title="–ß–° (–ß–∏—Å–ª–æ –°—É–¥—å–±—ã)"
              value={results.destiny_number}
              type="destiny"
              shortDescription="–í–∞—à –∂–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å"
            />
            <PersonalNumberCard 
              title="–ß–£* (–ü–æ–º–æ–≥–∞—é—â–µ–µ –ß–£)"
              value={results.helping_mind_number}
              type="helping_mind"
              shortDescription="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞"
            />
            <PersonalNumberCard 
              title="–ß–ú (–ß–∏—Å–ª–æ –ú—É–¥—Ä–æ—Å—Ç–∏)"
              value={results.wisdom_number}
              type="wisdom"
              shortDescription="–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –º—É–¥—Ä–æ—Å—Ç–∏"
            />
            <PersonalNumberCard 
              title="–ü–ß (–ü—Ä–∞–≤—è—â–µ–µ –ß–∏—Å–ª–æ)"
              value={results.ruling_number}
              type="ruling"
              shortDescription="–ö–∞–∫ –≤—ã —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ –∂–∏–∑–Ω—å—é"
            />
          </div>

          {/* –ì—Ä–∞—Ñ–∏–∫ —Å–∏–ª—ã –ø–ª–∞–Ω–µ—Ç */}
          <PlanetaryStrengthChart />

        </CardContent>
      </Card>

      {/* Detail Modal */}
      <Dialog open={detailOpen} onOpenChange={setDetailOpen}>
        <DialogContent className="max-w-2xl">
          <DialogHeader>
            <DialogTitle>{detailTitle}</DialogTitle>
          </DialogHeader>
          <div className="text-sm whitespace-pre-line leading-relaxed max-h-96 overflow-y-auto">
            {detailText}
          </div>
        </DialogContent>
      </Dialog>

      {/* Modal –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª */}
      {showFormula && (
        <FormulaModal formula={showFormula} onClose={() => setShowFormula(null)} />
      )}
    </div>
  );
};



export default PersonalNumbers;